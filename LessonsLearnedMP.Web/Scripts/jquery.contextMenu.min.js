if(jQuery){(function(){$.extend($.fn,{contextMenu:function(b,a){if(b.menu==undefined){return false}if(b.inSpeed==undefined){b.inSpeed=150}if(b.outSpeed==undefined){b.outSpeed=75}if(b.inSpeed==0){b.inSpeed=-1}if(b.outSpeed==0){b.outSpeed=-1}$(this).each(function(){var c=$(this);var d=$(c).offset();$("#"+b.menu).addClass("contextMenu");$(this).mousedown(function(f){var g=f;g.stopPropagation();$(this).mouseup(function(i){i.stopPropagation();var k=$(this);$(this).unbind("mouseup");if(g.button==2){$(".contextMenu").hide();var j=$("#"+b.menu);if($(c).hasClass("disabled")){return false}var h={},l,m;if(self.innerHeight){h.pageYOffset=self.pageYOffset;h.pageXOffset=self.pageXOffset;h.innerHeight=self.innerHeight;h.innerWidth=self.innerWidth}else{if(document.documentElement&&document.documentElement.clientHeight){h.pageYOffset=document.documentElement.scrollTop;h.pageXOffset=document.documentElement.scrollLeft;h.innerHeight=document.documentElement.clientHeight;h.innerWidth=document.documentElement.clientWidth}else{if(document.body){h.pageYOffset=document.body.scrollTop;h.pageXOffset=document.body.scrollLeft;h.innerHeight=document.body.clientHeight;h.innerWidth=document.body.clientWidth}}}(i.pageX)?l=i.pageX:l=i.clientX+h.scrollLeft;(i.pageY)?m=i.pageY:m=i.clientY+h.scrollTop;setAllowRemoveFocus(false,"line 71 context menu");$(document).unbind("click");$(j).css({top:m,left:l}).fadeIn(b.inSpeed);$(j).find("A").mouseover(function(){$(j).find("LI.hover").removeClass("hover");$(this).parent().addClass("hover")}).mouseout(function(){$(j).find("LI.hover").removeClass("hover")});$(document).keypress(function(n){switch(n.keyCode){case 38:if($(j).find("LI.hover").size()==0){$(j).find("LI:last").addClass("hover")}else{$(j).find("LI.hover").removeClass("hover").prevAll("LI:not(.disabled)").eq(0).addClass("hover");if($(j).find("LI.hover").size()==0){$(j).find("LI:last").addClass("hover")}}break;case 40:if($(j).find("LI.hover").size()==0){$(j).find("LI:first").addClass("hover")}else{$(j).find("LI.hover").removeClass("hover").nextAll("LI:not(.disabled)").eq(0).addClass("hover");if($(j).find("LI.hover").size()==0){$(j).find("LI:first").addClass("hover")}}break;case 13:$(j).find("LI.hover A").trigger("click");break;case 27:$(document).trigger("click");break}});$("#"+b.menu).find("A").unbind("click");$("#"+b.menu).find("LI:not(.disabled) A").click(function(){$(document).unbind("click").unbind("keypress");$(".contextMenu").hide();if(a){a($(this).attr("href").substr(1),$(k),{x:l-d.left,y:m-d.top,docX:l,docY:m})}return false});setTimeout(function(){$(document).click(function(){$(document).unbind("click").unbind("keypress");$(j).fadeOut(b.outSpeed);return false})},0)}})});if($.browser.mozilla){$("#"+b.menu).each(function(){$(this).css({MozUserSelect:"none"})})}else{if($.browser.msie){$("#"+b.menu).each(function(){$(this).bind("selectstart.disableTextSelect",function(){return false})})}else{$("#"+b.menu).each(function(){$(this).bind("mousedown.disableTextSelect",function(){return false})})}}$(c).add($("UL.contextMenu")).bind("contextmenu",function(){return false})});return $(this)},disableContextMenuItems:function(a){if(a==undefined){$(this).find("LI").addClass("disabled");return($(this))}$(this).each(function(){if(a!=undefined){var b=a.split(",");for(var c=0;c<b.length;c++){$(this).find('A[href="'+b[c]+'"]').parent().addClass("disabled")}}});return($(this))},enableContextMenuItems:function(a){if(a==undefined){$(this).find("LI.disabled").removeClass("disabled");return($(this))}$(this).each(function(){if(a!=undefined){var b=a.split(",");for(var c=0;c<b.length;c++){$(this).find('A[href="'+b[c]+'"]').parent().removeClass("disabled")}}});return($(this))},disableContextMenu:function(){$(this).each(function(){$(this).addClass("disabled")});return($(this))},enableContextMenu:function(){$(this).each(function(){$(this).removeClass("disabled")});return($(this))},destroyContextMenu:function(){$(this).each(function(){$(this).unbind("mousedown").unbind("mouseup")});return($(this))}})})(jQuery)};