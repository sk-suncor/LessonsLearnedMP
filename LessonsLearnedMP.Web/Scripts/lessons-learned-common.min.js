$(function(){monkeyPatchAutocomplete();$("input").livequery(function(){$(this).bind("keydown",function(a){var b=(a.keyCode?a.keyCode:(a.which?a.which:a.charCode));if(b==13){$(".lesson-action-main:first").click();return false}})});$("#RoleChange").change(function(){var a=$("<form action='/Shared/ChangeRole' id='ChangeRoleForm' method='post' name='ChangeRoleForm'></form>");a.append('<input type="hidden" id="ReturnToUrl" name="ReturnToUrl" value="'+location.href+'" />');a.append('<input type="hidden" id="RoleId" name="RoleId" value="'+$(this).val()+'" />');$("body").append(a);a.submit()});$(".button").livequery(function(){$(this).button().end().removeAttr("title")});$("#Navigation .button").livequery(function(){$(this).removeClass("ui-corner-all").addClass("ui-corner-top")});$("#Navigation .button.selected-tab").livequery(function(){$(this).off("mouseenter.button");$(this).off("mouseleave.button")});$(".clickable").livequery(function(){$(this).click(function(){var a=$(this).attr("data-controlId");if(a){$("#"+a).focus().click()}var b=$(this).attr("data-hideId");if(b){$("#"+b).hide(500)}})});$(".lesson-action-ddl, .grid-button").livequery(function(){$(this).button().show().next().button({text:false,icons:{primary:"ui-icon-triangle-1-s"}}).show().parent().buttonset()});$("input[type=radio]").livequery(function(){$(this).fix_radios()});$(".delete-record").live("click",function(){var a=$(this);$('<div>Are you sure you wish to delete the Lesson "'+a.attr("data-title")+'"?</div>').dialog({modal:true,width:300,title:"Delete the Lesson?",draggable:false,resizable:false,buttons:{Delete:function(){var b=$('<form action="'+a.attr("data-url")+'" method="post"></form>');$("body").append(b);b.submit()},Cancel:function(){$(this).dialog("close")}}}).dialog("open");return false});$(".un-delete-record").live("click",function(){var a=$('<form action="'+$(this).attr("data-url")+'" method="post"></form>');$("body").append(a);a.submit();return false});$("div.ui-dialog").livequery(function(){$(this).each(function(){$(this).appendTo($("html body")[0])})});if($(".validation-summary-errors ul li").length>4){$(".validation-summary-errors ul li:nth-child(3)").after('<li><a href="#" class="error-more closed">More....</a></li>')}$(".error-more").live("click",function(){if($(this).toggleClass("closed").hasClass("closed")){$(this).html("More....")}else{$(this).html("Less....")}$("#_FAULT .ui-state-error").toggleClass("opened");return false});if(csvDownloadRequired){window.location=siteRoot+"Lesson/DownloadFile"}$(".helptip").livequery(function(){$(this).tooltip({showURL:false,bodyHandler:function(){var b=$(this).attr("data-helpTopic");var a="";if(b){$.ajax({url:siteRoot+"Shared/HelpTopic",type:"GET",dataType:"html",async:false,data:{helpTopic:b},success:function(c){a=c}})}return a}})})});function monkeyPatchAutocomplete(){var a=$.ui.autocomplete.prototype._renderItem;$.ui.autocomplete.prototype._renderItem=function(c,b){return $("<li></li>").data("item.autocomplete",b).append("<a>"+b.label+"</a>").appendTo(c)}}function toggleValidation(a,b){if(b){$(a).addClass("field-validation-valid").removeClass("field-validation-error")}else{$(a).addClass("field-validation-error").removeClass("field-validation-valid")}}$.fn.fix_radios=function(){function b(){if(!this.checked){return}if(!this.was_checked){$(this).change()}}function a(c){if(this.was_checked){c.stopImmediatePropagation();return}$("input[name='"+this.name+"']").each(function(){this.was_checked=this.checked})}return this.focus(b).change(a)};